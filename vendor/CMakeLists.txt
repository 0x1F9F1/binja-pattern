add_subdirectory(binaryninja-api)
add_subdirectory(fmt)
add_subdirectory(mem)

if (0)
    set(CAPSTONE_BUILD_STATIC_RUNTIME ON)
    set(CAPSTONE_BUILD_STATIC ON)
    set(CAPSTONE_BUILD_SHARED OFF)
    set(CAPSTONE_BUILD_DIET ON)
    set(CAPSTONE_BUILD_TESTS OFF)
    set(CAPSTONE_BUILD_CSTOOL OFF)
    set(CAPSTONE_USE_DEFAULT_ALLOC ON)

    # set(CAPSTONE_X86_REDUCE ON)
    set(CAPSTONE_X86_ATT_DISABLE ON)

    set(CAPSTONE_ARM_SUPPORT OFF)
    set(CAPSTONE_ARM64_SUPPORT OFF)
    set(CAPSTONE_M68K_SUPPORT OFF)
    set(CAPSTONE_MIPS_SUPPORT OFF)
    set(CAPSTONE_PPC_SUPPORT OFF)
    set(CAPSTONE_SPARC_SUPPORT OFF)
    set(CAPSTONE_SYSZ_SUPPORT OFF)
    set(CAPSTONE_XCORE_SUPPORT OFF)
    set(CAPSTONE_X86_SUPPORT ON)
    set(CAPSTONE_TMS320C64X_SUPPORT OFF)
    set(CAPSTONE_M680X_SUPPORT OFF)
    set(CAPSTONE_EVM_SUPPORT OFF)

    add_subdirectory(capstone)
endif()

if (1)
    set(ZYDIS_MINIMAL_MODE ON)
    set(ZYDIS_FEATURE_DECODER ON)
    set(ZYDIS_FEATURE_FORMATTER OFF)
    set(ZYDIS_FEATURE_AVX512 ON)
    set(ZYDIS_FEATURE_KNC OFF)
    set(ZYDIS_BUILD_SHARED_LIB OFF)
    set(ZYDIS_BUILD_EXAMPLES OFF)
    set(ZYDIS_BUILD_TOOLS OFF)
    set(ZYDIS_FUZZ_AFL_FAST OFF)

    add_subdirectory(zydis)
endif()
